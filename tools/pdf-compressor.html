<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PDF Size Compressor</title>
</head>
<body>

    <h1>PDF Size Compressor</h1>

    <label for="pdf-input" class="upload-area" id="upload-label">
        <p>Click to Select a PDF File</p>
    </label>
    <input type="file" id="pdf-input" accept=".pdf" style="display: none;">

    <div id="file-info" style="text-align: center;"></div>
    <div id="status" style="text-align: center;"></div>

    <div class="compression-controls" style="visibility: hidden; opacity: 0;">
        <div class="slider-container">
            <label for="compression-slider">Compression Level</label>
            <input type="range" id="compression-slider" min="10" max="80" value="50" step="10">
            <div id="slider-value">50%</div>
        </div>
        <button id="compress-button">Compress PDF</button>
    </div>

    <div class="result-area">
        <p id="result-text"></p>
        <a id="download-button" href="#" download="compressed.pdf">Download Compressed PDF</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = `https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js`;
        const pdfInput = document.getElementById('pdf-input');
        const uploadLabel = document.getElementById('upload-label');
        const controls = document.querySelector('.compression-controls');
        let pdfFile = null;

        uploadLabel.addEventListener('click', () => pdfInput.click());

        pdfInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file && file.type === 'application/pdf') {
                pdfFile = file;
                document.getElementById('file-info').textContent = `File: ${file.name}`;
                controls.style.visibility = 'visible';
                controls.style.opacity = '1';
            }
        });

        document.getElementById('compression-slider').addEventListener('input', (e) => {
            document.getElementById('slider-value').textContent = `${e.target.value}%`;
        });
    </script>
</body>
</html>
